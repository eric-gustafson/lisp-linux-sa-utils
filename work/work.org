#+title: Short Term TODO's and babel scratch pad
#+author: eric gustafson
#+startup: overview


* TODO algo1
  get list of network interfaces or seed it.
  
  filter out wired ones

  find the target interface

  generate hostapd and fork/exec

  setup interface
  

* TODO udev info
  [[https://opensource.com/article/18/11/udev]]  
  

* simultaneous AP and managed mode
** udev rule
#+BEGIN_SRC 
SUBSYSTEM=="ieee80211", ACTION=="add|change", ATTR{macaddress}=="b8:27:eb:ff:ff:ff", KERNEL=="phy0", \
  RUN+="/sbin/iw phy phy0 interface add ap0 type __ap", \
  RUN+="/bin/ip link set ap0 address b8:27:eb:ff:ff:ff"
#+END_SRC

#+BEGIN_SRC lisp :results value
  (let ((lines 
         (with-open-file (*standard-input* #P"/proc/net/dev")
           (loop :for l = (read-line nil nil) :while l :collect (ppcre:split "\\s" l))
           )))
    (loop :for l in lines :do (format t "~a~%" l) )
    lines)
#+END_SRC

#+RESULTS:
#+begin_example
(Inter-|   Receive                                                |  Transmit)
( face |bytes    packets errs drop fifo frame compressed multicast|bytes
 packets errs drop fifo colls carrier compressed)
(wlx9cefd5fdd60e:       0       0    0    0    0     0          0         0
    0       0    0    0    0     0       0          0)
(    lo:  211828     114    0    0    0     0          0         0   211828
 114    0    0    0     0       0          0)
(enxb827eb659c11:       0       0    0    0    0     0          0         0
    0       0    0    0    0     0       0          0)
( wlan0: 4389488   40233    0    0    0     0          0     17994   600104
 3070    0    0    0     0       0          0)
#+end_example


* Parsing Challenges and Examples

** TODO Make unit tests out of these

** TODO Produce documentation from these

** ifconfig
  - lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536

#+BEGIN_SRC sh :results output
  ifconfig
#+END_SRC

#+RESULTS:
#+begin_example
lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536
        inet 127.0.0.1  netmask 255.0.0.0
        inet6 ::1  prefixlen 128  scopeid 0x10<host>
        loop  txqueuelen 1000  (Local Loopback)
        RX packets 4040  bytes 784591 (766.2 KiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 4040  bytes 784591 (766.2 KiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

virbr0: flags=4099<UP,BROADCAST,MULTICAST>  mtu 1500
        inet 192.168.122.1  netmask 255.255.255.0  broadcast 192.168.122.255
        ether 52:54:00:87:45:88  txqueuelen 1000  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 0  bytes 0 (0.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

wlo1: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.11.124  netmask 255.255.255.0  broadcast 192.168.11.255
        inet6 fe80::2ba4:9934:e976:da52  prefixlen 64  scopeid 0x20<link>
        ether 48:45:20:ef:5b:e6  txqueuelen 1000  (Ethernet)
        RX packets 153661  bytes 132536356 (126.3 MiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 60616  bytes 8713473 (8.3 MiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

#+end_example








** TODO get wireless information


